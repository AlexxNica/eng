<!DOCTYPE html>
<html lang="en">
<head>
    <title>Boilerplate API (BAPI)</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" type="text/css" href="media/css/restdown.css">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
</head>
<body>
<div id="header">
    <h1>Boilerplate API (BAPI) Documentation</h1>
</div>

    <div id="sidebar">
<ul>
  <li><div><a href="#boiled-eggs">Boiled Eggs</a></div>
  <ul>
    <li><div><a href="#CreateEgg"><span class="method both"><span class="name">CreateEgg</span> <span class="endpoint">(<span class="verb">POST</span> <span class="path">/eggs</span>)</span></a></div></li>
    <li><div><a href="#ListEggs"><span class="method both"><span class="name">ListEggs</span> <span class="endpoint">(<span class="verb">GET</span> <span class="path">/eggs</span>)</span></a></div></li>
    <li><div><a href="#GetEgg"><span class="method both"><span class="name">GetEgg</span> <span class="endpoint">(<span class="verb">GET</span> <span class="path">/eggs/:uuid</span>)</span></a></div></li>
  </ul></li>
  <li><div><a href="#guideline-repository-name">Guideline: Repository Name</a></div></li>
  <li><div><a href="#best-practice-use-restdown-for-docs">Best Practice: Use restdown for docs</a></div></li>
</ul>

    </div>
    <div id="content">

<h1>Boilerplate API (BAPI)</h1>
<div class="intro">


<p>TODO: overview, h1-section for each of the guidelines/best-practices</p>


</div>
<h1 id="boiled-eggs">Boiled Eggs</h1>

<p>This shows the API implemented by the example node.js server in this repo.
The main point here is show a good way to document API endpoints.</p>

<h2 id="CreateEgg"><span class="method both"><span class="name">CreateEgg</span> <span class="endpoint">(<span class="verb">POST</span> <span class="path">/eggs</span>)</span></h2>

<p>TODO</p>

<h2 id="ListEggs"><span class="method both"><span class="name">ListEggs</span> <span class="endpoint">(<span class="verb">GET</span> <span class="path">/eggs</span>)</span></h2>

<p>TODO</p>

<h2 id="GetEgg"><span class="method both"><span class="name">GetEgg</span> <span class="endpoint">(<span class="verb">GET</span> <span class="path">/eggs/:uuid</span>)</span></h2>

<p>TODO</p>

<h1 id="guideline-repository-name">Guideline: Repository Name</h1>

<p>A repo name that matches how the API is discussed (spoken, chatted and
emailed) means you'll get the repo name right on first guess.
If you can get away with it, a repo named after the abbreviate API name
is best. E.g.:</p>

<pre><code>Network API -&gt; NAPI -&gt; napi.git   # Good.
                    -&gt; NAPI.git   # Whoa! Capital letters are crazy here.
                    -&gt; network-api.git   # Less good.
                    -&gt; network_api.git   # Even less good (*).
</code></pre>

<p>(*) Thought, I'll admit that my dislike for underscores in filenames is
personal preference.</p>

<p>So why isn't this repo called "bapi.git"? Because this repo will more often
be called the "Boilerplate API" when discussed -- no need to popularize
"BAPI".</p>

<h1 id="best-practice-use-restdown-for-docs">Best Practice: Use restdown for docs</h1>

<p>Restdown is a tool for creating API docs using a single Markdown file.
It lives here: <a href="https://github.com/trentm/restdown">https://github.com/trentm/restdown</a>.
You can set it up as follows:</p>

<pre><code>git submodule add git://github.com/trentm/restdown.git deps/restdown
cd deps/restdown/
git checkout 1.2.15    # let's use a restdown release tag
</code></pre>

<p>Add the following to your Makefile:</p>

<pre><code>RESTDOWN := python2.6 $(TOP)/deps/restdown/bin/restdown

...

.PHONY: docs
docs:
        $(RESTDOWN) -m docs docs/index.restdown
</code></pre>

<p>The default media (css, etc) that comes with the default restdown "ohthejoy"
brand styles the docs as we want with a couple exceptions: no favicon and
no Joyent logo. I've added those to "docs/media/img" (the same as used
for our other API docs).</p>

<p>TODO: Finish off static serving of the docs in server.js.</p>

    </div>
<script type="text/javascript" charset="utf-8">
$(function() {
    var headerHeight = $("#header").height();

    var sections = $("#content h1[id], #content h2[id]");
    var sectionOffsets = [];
    var slack = 100;  // Give the section scroll some slack (in pixels).
    sections.each(function(elem) {
        sectionOffsets.push($(this).offset().top - headerHeight - slack);
    });

    var currSectionIdx = -1;
    function getSectionIdx(scrollDistance) {
        if (scrollDistance < sectionOffsets[0]) {
            return -1;
        } else {
            for (var id = sectionOffsets.length; id > 0; id--) {
                if (scrollDistance > sectionOffsets[id - 1]) {
                    return id - 1;
                    break;
                }
            }
        }
    }

    /** {{{ http://code.activestate.com/recipes/577787/ (r2) */
    _slugify_strip_re = /[^\w\s-]/g;
    _slugify_hyphenate_re = /[-\s]+/g;
    function slugify(s) {
      s = s.replace(_slugify_strip_re, '').trim().toLowerCase();
      s = s.replace(_slugify_hyphenate_re, '-');
      return s;
    }
    /** end of http://code.activestate.com/recipes/577787/ }}} */


    $("#content").scroll(function() {
        var scrollDistance = $("#content").attr('scrollTop');
        var sectionIdx = getSectionIdx(scrollDistance);
    
        if (sectionIdx !== currSectionIdx) {
            $("#sidebar li>div").removeClass("current");
            currSectionIdx = sectionIdx;
            if (currSectionIdx >= 0) {
                var heading = $(sections[currSectionIdx]).text();
                var possibleAnchors = [
                    slugify(heading), // h1 or non-method h2
                    heading.replace(/ /g, '-'), // h2 method, just name or just endpoint
                    heading.slice(0, heading.lastIndexOf(' (')).trimRight().replace(/ /g, '-'), // h2 method, name and endpoint
                ]
                for (var i=0; i < possibleAnchors.length; i++) {
                    $("#sidebar a[href|=#" + possibleAnchors[i] + "]").parent().addClass("current");
                }
            }
        }
    });
});
</script>

</body>
</html>
